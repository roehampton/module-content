# Software Development 2 Lab 03 -- Fundamentals of Javascript

## Introduction to JavaScript

HTML isn't programming. There is no execution -- sequence, selection, or iteration. HTML describes a document structure and CSS adds styling to it: its a way of publishing content, similar to a book or magazine.

So how do we make web pages dynamic - responding to the user and providing personalised content?

JavaScript is that main way that the 'front end' web is programmed ie, that dynamic and user-interactive features are implemented (eg. complex animations, clickable buttons, popup menus). Truly dynamic features such as personalisation rely on the communication between the frontend (browser) and backend (server).
. 'Backend' programming languages used extensively for the web include PHP, Java and Python.  

Javascript is commonly seen as a progaramming langauge for the front-end, ie. the code is executed in the browser.  However, this module focuses on using JavaScript for both front-end (web page or client-side) and back-end (server-side) programming - a combination that is becoming increasingly common.

## Beginning Javascript

Let us look at an example of some JavaScript on a web page:

```javascript
document.write("Hello, world!");
```

This simply adds the text `Hello, world!` to a web page. `document` is the web page that the JavaScript is running on.  The dot denotes that we will method that we will run on the document and the "Hello World!" is the parameters we pass to the write function.

JavaScript is similar to Python and other C like languages. As we start building some web pages with JavaScript code you will see what we mean.

The HTML DOM (Document Object Model)

Front-end javascript works by identifying a part of the DOM structure of an HTML page, and acting on that.  Thats why we need the reference to 'document' which is the top-level element in the DOM.

Having a good understanding of the DOM, ie. the heirachical structure of an HTML page will help you with Javascript.

![image](https://www.w3schools.com/js/pic_htmltree.gif)

Image from W3 Schools

### Your First JavaScript Enabled Web Page

There are various ways to use JavaScript in your web page. We are going to split our JavaScript code into a separate file from our HTML document. You can embed JavaScript into a web page, but it does not allow easy reuse of JavaScript.

> **Create a new file called `script1.js` and save it in the same folder as your HTML files.** 
> **Copy the JavaScript code below into this file.**

```javascript
document.write("Hello, world!");
```


To add the script to a HTML file we use the `<script>` element. Create an html file with the following.  Note that the script tag goes in the 'head' section of the document.  Note also the relative path, as we discussed in lab 1.

```html
<!DOCTYPE html>
<html>
    <head>
        <title>My Changing Web Page!</title>
        <script src="script1.js"></script>
    </head>
    <body>
    </body>
</html>
```

**Make sure you have saved the changes to all files.** Then open the HTML file  in your browser and you should see `Hello, world!` displayed on the page - this is being generated by the javascript file - there is no 'hello world' in your HTML file.

> #### More about the `<script>` Tag
>
> We use `<script>` to import a script into our web page. There are two main ways we can do this.
>
> 1. Setting the `src` attribute to point to the file we want to import.
> 2. Putting the code between the opening and closing `<script>` tags.
>
> For example, in the example above, we could have written the following directly into our HTML page:
>
> ```html
> <script>
> document.write("Hello, world!");
> </script>
> ```
>
> `<script>` tags can be placed anywhere in your HTML document. As we've placed our `<script>` tag at the top of the page, it is processed there, which means `Hello, world!` appears at the top of the page.
>
> **EXERCISE** Add some text and markup to the body section of your html file, and try putting the code above in the `<script>` tag in the body of the page and see what happens.
>
> Your HTML document can also have multiple `<script>` tags.
>
> **EXERCISE** Try adding the `<script>` tag in multiple places in your HTML file to see what happens.

### More on JavaScript Code

JavaScript has many similarities to Python. It is an interpreted language (you don't have to compile code) and it is dynamically typed (variables can change type). As such, many of ideas you know from Python will work in JavaScript. Let us look at various elements in JavaScript here as a reference point.

#### Variables

Variables in JavaScript are declared with the `var` keyword.

(You may also see the 'let' keyword used.  They differ in how the variable has scope - see [Link](https://stackoverflow.com/questions/762011/whats-the-difference-between-using-let-and-var) for an explanation.)

For example:

```javascript
var name = "Lisa";
var age = 21;
var teacher = true; // Notice all lowercase true
```

Apart from requiring the `var` keyword, variables in JavaScript work much the same as Python.

#### Sequence

As Python and any *imperative* language, JavaScript statements are executed in order. 

#### Syntax

Unlike Python which has stripped out a lot of constructs like semi colons, brackets and braces, and have replaced these markers with whitespace, JavaScript statements all end in a semi-colon -- `;`, and curly braces {} are used to delineate code 'blocks'.

**Exercise** - Javascript variables and syntax

Write your own code about yourself, along the lines of the following. Add some additional attributes and change the output.  Notice how we are concatentating strings and also how to ouput text we need to specify where in the DOM we are writing to, in this case, its the document.

```html
<!DOCTYPE html>
<html>

<head>
    <title>My Changing Web Page!</title>
</head>

<body>
    <script>
        var name = "Lisa";  // string type
        var age = 21;  //Number type
        var teacher = true; // Boolean type: Notice all lowercase true
        document.write('Name ' + name + '<br>');  // + is used for string concatentation
        document.write('Age ' + age + '<br>');  // Try using + with another number and see what happens!
        document.write('Is teacher? ' + teacher);
    </script>
</body>

</html>
```
#### Debugging

**Exercise**  Javascript debugging - the console
Add the following line anywhere INSIDE the script tags:

```javascript
   console.log(name);
```
Run the code, open developer tools, click the console tag and you should see the value of your name variable shown.  Use `console.log()` throughout your code for debugging.

#### Targetting parts of the HTML page

One of the main reasons we use javascript in web pages is that it can find and interact with HTML elements on the page.  Javascript builds a tree-like model of your html page and your code can use this to dynamically change elements.  

**Exercise** Target an element in the DOM

Add the following to the body section of the HTML page you have created above.

```html
<h1>page heading</h1>
    <div id="content"></div>
    <script>document.getElementById("content").innerHTML = name;</script>
```
Here we are dynamically adding our variable value to the div we have defined with our id of content.

See if you can get the name to be added into the heading instead (HINT: You will need to use `document.getElementsByTagName("h1")[0].innerHTML = name;`  to target the H1 HTML - Can you guess why the array index [0] is needed?

### Your Second JavaScript Enabled Web Page -- Event driven programming

Javascript is good for creating interactive user interfaces, ie. it can respond to user actions

In this example we will add a button to our page. Unlike in our HTML forms example the click on the button fires a javascript function.

Save the following HTML code as `second.html`.

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Buttons!</title>
    <script src="script2.js"></script>
  </head>
  <body>
    <h1>
      Click the button!
    </h1>
    <input type="button" value="Click Me!" onclick="msg()">
  </body>
</html>
```

As covered in the HTML forms tutorial, we are using the `<input>` element to get information from the user. We have defined three attributes:

- `type` is the type of input element. We are using a button, so we set this to `button`.
- `value` is the text on the button. We've set this to `Click Me!`.
- `onclick` is the code that will be run when we click the button. This is an *event* that our JavaScript will respond to. It will execute the `msg` function.

We need to implement the `msg` function. This can be done in a seperate file, or in the head section of our HTML document.  To make it easy, add it to the head section of the second.html file.  Remember to surround it in script tags.

```javascript
function msg() {
    document.write("You clicked the button!");
}
```

**Save everything and then open the HTML document in your browser.** When you click the button the web page will be replaced with `You clicked the button!`

> **EXERCISE** add a second button to the HTML page. When this button is clicked, it should display the message `Not that button!`

### Manipulating HTML Elements

OK, so far we've done the following:

* Displayed a message in the window.
* Reacted to a button press.

Let's go back to what we know about manipulating an HTML element that exists on the web page so that we can make our page more dynamic and interactive.

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>My Changing Web Page!</title>
    <script>

    </script>
  </head>
  <body>
    <h1>
      Click the button!
    </h1>
    <input type="button" value="Click me!" onclick="change()">
    <p id="my_text">
      Hello, world!
    </p>
  </body>
</html>

```
##### Understanding the id attribute

Javascript uses the 'id' attribute in HTML to identify a unique part of a page that it should act upon or 'target'.

In the above example, our `<p>` element has the attribute `id` set to `my_text`. 

To show how Javascript can target this part of the page by using the id, add this function to your document head section, in between the empty 'script' tags.  

```javascript
function change() {
     document.getElementById("my_text").innerHTML = "You clicked me";
}
```

In your body section, double-check that your button is calling the 'change' function.

**Save all the files and open the HTML document in your browser.** You can click the button and the text of the `<p>` element will change.

To recap: our function is looking at the HTML page structure, finding the element with ID my_text, and then setting the HTML value of the element found to the string "you clicked me".  Note that you can include more HTML tags in the string - try and put the word 'clicked' in bold.

## Save your work into GIT

Save everything from the lab into your git repository (make sure you have one for the labs, separate from your groupwork)
Try:

```bash
git add <names of your files>
git commit -m "starting javascript"
git push
```

## Programming constructs in Javascript

Lets find out more about how to write programs in Javascript - you will find it similar but different to Python.  You will especially notice that Javascript uses punctuation (curly braces, brackets, semicolons) to delineate blocks of code, whereas Python uses indentation.  Visual studio code will help you ensure that you have correct syntax - matching brackets and braces, for example.


#### Conditionals -- Selection

JavaScript provides `if` conditional statements that operate the same as Python. The general structure of a JavaScript `if` statement is as follows:

```javascript
if (condition) {
  // block of code to run when condition is true
}
```

There are two things to note that are different to Python:

- The condition **must** be surrounded by parentheses, e.g., `(age == 21)` not `age == 21`.
- JavaScript requires curly brackets `{ ... }` to denote which code to execute if the `if` statement is `true`. This is different to Python's use of indentation. 

An `else` branch can also be defined:

```javascript
if (condition) {
  // block of code to run when condition is true
}
else {
  // block of code to run when condition is false
}
```

JavaScript doesn't have `elif` as Python, and so the `else if` must be written out in full.

```javascript
if (condition) {
  // block of code to run when first condition is true
}
else if (condition) {
  // block of code to run when second condition is true
}
else {
  // block of code to run when both conditions are false
}
```

JavaScript also supports a `switch` statement. If you've not used a `switch` statement, it checks the value of a variable and then runs the appropriate code block. For example:

```javascript
switch (age) {
  case 20:
    // block of code to run when age == 20
    break;
  case 21:
    // block of code to run when age == 21
   	break;
  default:
    // block of code to run when otherwise
}
```

You can find out more about JavaScript `switch` statements [here](https://www.w3schools.com/js/js_switch.asp).

**Exercise** Conditionals in Javascript

Write javascript code for the following.  First use if, else if, else. Then rewrite using a switch.  (Set up a single variable for the student year, and change its value to test the code - we will make this more complicated later)

A student can be in year 1, 2, or 3.
Write your code such that if the student year is 1, the output is 'You are in year 1', if 2, you are in year 2 and so on.


#### Loops -- Iteration

JavaScript supports a number of different loops (ie. programming constructs that allow you to do the same action repeatedly).  Lets concentrate on the for and the while.

(Full details here: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration)

##### `for` Loops

JavaScript has three different for loops. The first one is normally used to iterate across a range of numbers, ie to run a specified number of times.  This is a typical construction in most imperitive programming languages.

The for loop has three parts (in the brackets)

1. The starting state (var i=0)
2. The condition or test to see if the loop should run (i < 10)
3. The 'post statement' that is run at the end of the code block, usually an incremented value that will control the loop.

```javascript
for (var i = 0; i < 10; i++) {
  // block of code to run 10 times
}
```

**Exercise** For loop
Write a for loop that outputs numbers 1 to 20.


The second type of `for` loop allows you to iterate over a 'collection' ie. a data structure of many elements, It is the same as Python's `for value in collection` loop. For example:

```javascript
var names = ["Lisa", "Arturo", "Kimia", "Kevin"]; // Creating an array of strings
for (var name of names) {
  document.write(name + "<br>");
}
```

This will add each name to the HTML document. `<br>` is the HTML tag for inserting a new line.

Finally, JavaScript has a `for (var in object)` loop. This loop iterates through the properties of an object. We're going to examine object-orientation in this module, and will return to this `for` loop then.

##### `while` Loops

JavaScript provides two `while` loops. The first one you will be familiar with:

```javascript
while (condition) {
  // block of code to run while condition is true.
}
```

**Exercise**  While loop
Output numbers 1 to 20, this time using a while loop


#### Functions

As we have seen, functions in JavaScript are also similar to Python:

```javascript
function myfunction(parameters) {
  // code to execute
  return value;
}
```

Apart from using `function` to declare a function, and using curly brackets to define the start and end of the function, everything is the same in JavaScript and Python.

#### Comments

Comments in JavaScript start with `//`. Anything prefaced with this will not be executed. But bear in mind that HTML comments are different, so make sure javascript comments are all within the 'script' tags

Comments in HTML are as follows...

```html
<!--  comment here   -->
```


### Save your work into GIT

Save everything from the lab into your git repository.
Try:

```bash
git add <names of your files>
git commit -m "starting javascript"
git push
```


### Objects and properties

You may have wondered about the dot syntax throughout this lab sheet, for example:

```javascript
document.write('hello world')
```

We will do more about object orientated programming in a few weeks, but its good to start building your understanding now.

In this example:

`document` is an object, and Javascript under the hood has defined a 'method', ie a function that can act upon that project that takes a string parameter - in this case 'hello world'.

An object can also have 'properties' which are variables inside the object may also be able to be accessed via the dot syntax.

Objects can be understood as custom data structures that both hold values AND may also have functionality via their methods. Objects are defined by what we call 'classes'.  Understanding objects and how to define them is a fundamental part of good code design.  

### Summary


Well done! You've actually covered a good amount of how we can program web pages:

- Setting events.
- Getting elements by their `id`.
- Changing elements.
- Understanding how variables, conditionals and loops are implemented in Python
- Understanding objects, properties and methods

### Homework

#### 1. More javascript

This exercise combines the parts we've learned so far. Create a web page with some text in a paragraph element and with a button. When the user clicks the button, it should change the colour of the text in the paragraph to red. 

HINTS:
Locate the HTML element in the DOM using the same method you used above. 

Then, you can use this code to change the *style* of an HTML element to set its colour to `red`.

```javascript
element.style['color'] = "red";
```

Now add a second button that will change the text colour to blue.

#### 2. Git

Save everything from the homework into your git repository.


```bash
git add <names of your files>
git commit -m "homework exercise"
git push
```

### So you want to know more

This module focuses on JavaScript, so we will cover much more code. But if you want to do more, [Tutorialspoint](https://www.tutorialspoint.com/javascript/index.htm) also has a JavaScript tutorial.

